(()=>{var t={151:function(t){
/*!
* VISLite JavaScript Library v1.8.0
* git+https://github.com/oi-contrib/VISLite.git
*/
var e;e=function(){"use strict";var t=function(){function t(t){void 0===t&&(t=.5),this.name="Hermite",this.__u=t}return t.prototype.setP=function(t,e,i,n,r,o){if(!(t<i))throw new Error("The point x-position should be increamented!");this.__a=t,this.__b=i;var s=this.__u*r,a=this.__u*o;return e/=i-t,n/=i-t,this.__MR=[2*e-2*n+s+a,3*n-3*e-2*s-a,s,e],this},t.prototype.use=function(t){if(this.__MR){var e=(t-this.__a)/(this.__b-this.__a),i=e*e;return(e*i*this.__MR[0]+i*this.__MR[1]+e*this.__MR[2]+this.__MR[3])*(this.__b-this.__a)}throw new Error("You shoud first set the position!")},t}(),e=function(){function e(t){void 0===t&&(t=0),this.name="Cardinal",this.__t=t}return e.prototype.setP=function(e){this.__HS={x:[],h:[]};var i,n,r=(e[1][1]-e[0][1])/(e[1][0]-e[0][0]);for(this.__HS.x[0]=e[0][0],i=1;i<e.length;i++){if(e[i][0]<=e[i-1][0])throw new Error("The point position should be increamented!");this.__HS.x[i]=e[i][0],n=i<e.length-1?e[i+1][1]>e[i][1]&&e[i-1][1]>e[i][1]||e[i+1][1]<e[i][1]&&e[i-1][1]<e[i][1]||e[i+1][1]==e[i][1]||e[i-1][1]==e[i][1]?0:(e[i+1][1]-e[i-1][1])/(e[i+1][0]-e[i-1][0]):(e[i][1]-e[i-1][1])/(e[i][0]-e[i-1][0]),this.__HS.h[i-1]=new t(.5*(1-this.__t)).setP(e[i-1][0],e[i-1][1],e[i][0],e[i][1],r,n),r=n}return this},e.prototype.use=function(t){if(this.__HS){for(this.__i=-1;this.__i+1<this.__HS.x.length&&(t>this.__HS.x[this.__i+1]||-1==this.__i&&t>=this.__HS.x[this.__i+1]);)this.__i+=1;return this.__i<0?this.__HS.h[0].use(this.__HS.x[0]):this.__i>=this.__HS.h.length?this.__HS.h[this.__HS.h.length-1].use(this.__HS.x[this.__HS.x.length-1]):this.__HS.h[this.__i].use(t)}throw new Error("You shoud first set the position!")},e}(),i=function(t,e){for(var i=[],n=0;n<4;n++)for(var r=0;r<e.length/4;r++)i[4*r+n]=t[n]*e[4*r]+t[n+4]*e[4*r+1]+t[n+8]*e[4*r+2]+t[n+12]*e[4*r+3];return i},n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r=function(){function t(t){void 0===t&&(t=n),this.name="Matrix4",this.__matrix4=t}return t.prototype.setValue=function(t){return void 0===t&&(t=n),this.__matrix4=t,this},t.prototype.move=function(t,e,n,r){return void 0===r&&(r=0),this.__matrix4=i(function(t,e,i,n){void 0===n&&(n=0);var r=Math.sqrt(e*e+i*i+n*n);return[1,0,0,0,0,1,0,0,0,0,1,0,e*t/r,i*t/r,n*t/r,1]}(t,e,n,r),this.__matrix4),this},t.prototype.rotate=function(t,e,n,r,o,s,a){var h=function(t,e,i,n,r,o){if("number"==typeof t&&"number"==typeof e){if("number"!=typeof i?(i=0,n=t,r=e,o=1):"number"==typeof n&&"number"==typeof r&&"number"==typeof o||(n=t,r=e,o=i,t=0,e=0,i=0),t==n&&e==r&&i==o)throw new Error("It's not a legitimate ray!");var s=Math.sqrt((n-t)*(n-t)+(r-e)*(r-e)),a=0!=s?(r-e)/s:1,h=0!=s?(n-t)/s:0,_=(n-t)*h+(r-e)*a,u=o-i,l=Math.sqrt(_*_+u*u),c=0!=l?u/l:1,p=0!=l?_/l:0;return[[a,c*h,h*p,0,-h,a*c,a*p,0,0,-p,c,0,e*h-t*a,i*p-t*h*c-e*a*c,-t*h*p-e*a*p-i*c,1],[a,-h,0,0,c*h,c*a,-p,0,h*p,a*p,c,0,t,e,i,1]]}throw new Error("a1 and b1 is required!")}(e,n,r,o,s,a);return this.__matrix4=i(i(i(h[1],function(t){var e=Math.sin(t),i=Math.cos(t);return[i,e,0,0,-e,i,0,0,0,0,1,0,0,0,0,1]}(t)),h[0]),this.__matrix4),this},t.prototype.scale=function(t,e,n,r,o,s){return void 0===r&&(r=0),void 0===o&&(o=0),void 0===s&&(s=0),this.__matrix4=i(function(t,e,i,n,r,o){return void 0===n&&(n=0),void 0===r&&(r=0),void 0===o&&(o=0),[t,0,0,0,0,e,0,0,0,0,i,0,n-n*t,r-r*e,o-o*i,1]}(t,e,n,r,o,s),this.__matrix4),this},t.prototype.multiply=function(t,e){return void 0===e&&(e=!1),this.__matrix4=e?i(this.__matrix4,t):i(t,this.__matrix4),this},t.prototype.use=function(t,e,n,r){return void 0===n&&(n=0),void 0===r&&(r=1),i(this.__matrix4,[t,e,n,r])},t.prototype.value=function(){return this.__matrix4},t}();function o(t,e,i,n,r){var o=Math.cos(i),s=Math.sin(i);return[(n-t)*o-(r-e)*s+t,(n-t)*s+(r-e)*o+e]}
/*!
    * animation of OIPage v1.7.0-alpha.3
    * git+https://github.com/oi-contrib/OIPage.git
    */var s,a=[];function h(t,e,i){arguments.length<2&&(e=400),arguments.length<3&&(i=function(){});var n={timer:function(t,e,i){if(!t)throw new Error("Tick is required!");var r=(new Date).valueOf()+"_"+(1e3*Math.random()).toFixed(0);return a.push({id:r,createTime:new Date,tick:t,duration:e,callback:i}),n.start(),r},start:function(){s||(s=globalThis.requestAnimationFrame?globalThis.requestAnimationFrame((function t(){n.tick(),s&&(s=globalThis.requestAnimationFrame(t))})):setInterval(n.tick,13))},tick:function(){var t,e,i,r,o,s,h,_=a;for((a=[]).length=0,e=0;e<_.length;e++)t=(o=_[e]).createTime,i=o.tick,s=o.duration,r=o.callback,i(h=(h=(+(new Date).valueOf()-t.valueOf())/s)>1?1:h),h<1&&o.id?a.push(o):r(h);a.length<=0&&n.stop()},stop:function(){s&&(globalThis.requestAnimationFrame?globalThis.cancelAnimationFrame(s):clearInterval(s),s=null)}},r=n.timer((function(e){t(e)}),e,i);return{stop:function(){var t;for(t in a)if(a[t].id==r)return void(a[t].id=void 0)}}}function _(t,e,i,n){if(t<e){var r=e;e=t,t=r}else if(t==e)return[t];var o=function(t){for(var e=t<100&&t>-100?10:.1,i=-1,n=t;10==e?n>=-100&&n<=100:n<=-100||n>=100;)i+=1,n*=e;if(10==e)return Math.pow(10,i);for(var r="0.",o=1;o<i;o++)r+="0";return+(r+"1")}(t-e),s=Math.ceil((t-e)*o/i),a=function(i){var n=({3:2,4:5,6:5,7:5,8:10,9:10,11:10,12:10,13:15,14:15,16:15,17:15,18:20,19:20,21:20,22:20,23:25,24:25,26:25,27:25}[s+i]||s+i)/o,r=Math.floor(e/n)*n,a=[];a.push(r);for(var h=1;a[a.length-1]<t;h++)a.push(r+n*h);return a},h=a(0),_=function(){for(var t=[],i=h[h.length-1]-(null==n?void 0:n.max),r=0;r<h.length;r++)r+1<h.length&&h[r+1]-i<e||t.push(h[r]-i);return t},u=function(){for(var e=[],i=h[0]-(null==n?void 0:n.min),r=0;r<h.length&&(e[r]=h[r]-i,!(t<=e[r]));r++);return e};if(n){if("max"in n&&"min"in n&&n.max>=t&&n.min<=e){var l=function(){if(h[0]>=n.min&&h[h.length-1]<=n.max)return!0;var t=_();if(t[0]>=n.min&&t[t.length-1]<=n.max)return h=t,!0;var e=u();return e[0]>=n.min&&e[t.length-1]<=n.max?(h=e,!0):void 0};if(l())return h;for(var c=1;c<100;c++){if(h=a(c),l())return h;if(h=a(-c),l())return h}}"max"in n&&n.max>=t?n.max<h[h.length-1]&&(h=_()):"min"in n&&n.min<=e&&n.min>h[0]&&(h=u())}for(var p=0;p<h.length;p++){var f=h[p]+"";/\./.test(f)&&(/9{7,}$/.test(f)?(f=f.replace(/9{7,}$/,""),h[p]=+(f.substring(0,f.length-1)+(+f[f.length-1]+1))):/0{7,}\d$/.test(f)&&(h[p]=+f.replace(/0{7,}\d$/,"")))}return h}var u=function(t,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},u(t,e)};function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var c=function(){return c=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},c.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var p=["href","title","show","type","role","actuate"],f=function(t,e){g(t,"stroke-dasharray",e.lineDash.join(",")),g(t,"stroke-width",e.lineWidth+""),g(t,"stroke-linecap",e.lineCap+""),g(t,"stroke-linejoin",e.lineJoin+"")};function d(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}var v=function(t,e,i){p.indexOf(e)>-1?t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:"+e,i+""):t.setAttribute(e,i+"")},g=v;function y(t,e){f(t,e),v(t,"stroke",e.strokeStyle),v(t,"fill",e.fillStyle)}function m(t,e){v(t,"fill",e.fillStyle)}function w(t,e){f(t,e),v(t,"stroke",e.strokeStyle),v(t,"fill","none")}var x=function(t,e,i,n,r){var o=Math.cos(i),s=Math.sin(i);return[+((n-t)*o-(r-e)*s+t).toFixed(7),+((n-t)*s+(r-e)*o+e).toFixed(7)]};function b(t,e,i,n,r,o,s){e<0&&(t+=e,e*=-1);var a,h=[];a=x(0,0,t,r,0),h[0]=a[0],h[1]=a[1],a=x(0,0,e,a[0],a[1]),h[2]=a[0],h[3]=a[1],a=x(0,0,t,o,0),h[4]=a[0],h[5]=a[1],a=x(0,0,e,a[0],a[1]),h[6]=a[0],h[7]=a[1],s(t,t+e,h[0]+i,h[1]+n,h[4]+i,h[5]+n,h[2]+i,h[3]+n,h[6]+i,h[7]+n,.5*(o-r))}var E=function(t){var e=t.getElementsByTagName("defs");if(e.length<=0){var i=d("defs");return t.appendChild(i),i}return e[0]},P=function(t,e,i,n,r){if("text"!==t.nodeName.toLowerCase())throw new Error("Need a <text> !");g(t,"dy",{top:.5*e.fontSize,middle:0,bottom:.5*-e.fontSize}[e.textBaseline]),function(t,e){for(var i in e)t.style[i]=e[i]}(t,{"text-anchor":{left:"start",right:"end",center:"middle"}[e.textAlign],"dominant-baseline":"central","font-size":e.fontSize+"px","font-family":e.fontFamily}),g(t,"x",i),g(t,"y",n),"number"==typeof r&&g(t,"transform","rotate("+(r%=360)+","+i+","+n+")")},T=function(t,e,i,n){if("circle"!==t.nodeName.toLowerCase())throw new Error("Need a <circle> !");g(t,"cx",e),g(t,"cy",i),g(t,"r",n)},C=function(t,e){if("path"!==t.nodeName.toLowerCase())throw new Error("Need a <path> !");g(t,"d",e)},A=function(t,e,i,n,r,o){if("path"!==t.nodeName.toLowerCase())throw new Error("Need a <path> !");var s=[];if(Array.isArray(e.rectRadius)&&e.rectRadius.length>0)for(var a=0;a<4;a++)s.push.apply(s,e.rectRadius);o<0&&(n-=o*=-1),r<0&&(i-=r*=-1);var h="";s.length>=4?(h="M"+(i+s[0])+" "+n,h+="L"+(i+r-s[1])+" "+n,h+="A"+s[1]+" "+s[1]+" 0 0 1 "+(i+r)+" "+(n+s[1]),h+="L"+(i+r)+" "+(n+o-s[2]),h+="A"+s[2]+" "+s[2]+" 0 0 1 "+(i+r-s[2])+" "+(n+o),h+="L"+(i+s[3])+" "+(n+o),h+="A"+s[3]+" "+s[3]+" 0 0 1 "+i+" "+(n+o-s[3]),h+="L"+i+" "+(n+s[0]),h+="A"+s[0]+" "+s[0]+" 0 0 1 "+(i+s[0])+" "+n):(h="M"+i+" "+n,h+="L"+(i+r)+" "+n,h+="L"+(i+r)+" "+(n+o),h+="L"+i+" "+(n+o),h+="Z"),g(t,"d",h)},R=function(t,e,i,n,r,o,s,a){if("path"!==t.nodeName.toLowerCase())throw new Error("Need a <path> !");if(s=s/180*Math.PI,a=a/180*Math.PI,s%=2*Math.PI,r>o){var h=r;r=o,o=h}a>=1.999999*Math.PI||a<=1.999999*-Math.PI?a=1.999999*Math.PI:a%=2*Math.PI,b(s,a,i,n,r,o,(function(i,n,s,a,h,_,u,l,c,p,f){var d=n-i>Math.PI?1:0,v="M"+s+" "+a;f<0&&(f=-f),v+="A"+r+" "+r+" 0 "+d+" 1 "+u+" "+l,"round"==e.arcEndCap?v+="A"+f+" "+f+"  0 1 0 "+c+" "+p:"-round"==e.arcEndCap?v+="A"+f+" "+f+"  0 1 1 "+c+" "+p:v+="L"+c+" "+p,v+="A"+o+" "+o+" 0 "+d+" 0 "+h+" "+_,"round"==e.arcStartCap?v+="A"+f+" "+f+"  0 1 0 "+s+" "+a:"-round"==e.arcStartCap?v+="A"+f+" "+f+"  0 1 1 "+s+" "+a:v+="L"+s+" "+a,"butt"==e.arcStartCap&&(v+="Z"),g(t,"d",v)}))},S=function(t,e){var i={value:function(){return"url(#"+e+")"},setColor:function(e,n){var r=d("stop");return t.appendChild(r),g(r,"offset",100*e+"%"),g(r,"style","stop-color:"+n+";"),i}};return i},I=Object.prototype.toString;function M(t){if(null===t||"object"!=typeof t||"[object Object]"!=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":I.call(t)}(t))return!1;if(null===Object.getPrototypeOf(t))return!0;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function k(t,e){for(var i in t)e[i]=t[i];return e}function O(t,e){!function t(e,i){for(var n in i){var r=i[n];M(r)?(e[n]||(e[n]={}),t(e[n],i[n])):e[n]=r}}(t,e)}var L=function(){function t(t){this.name="SVG",this.__config={fillStyle:"rgb(0,0,0)",strokeStyle:"rgb(0,0,0)",textAlign:"left",textBaseline:"middle",fontSize:16,fontFamily:"sans-serif",arcStartCap:"butt",arcEndCap:"butt",lineDash:[],lineWidth:1,lineCap:"butt",lineJoin:"miter",rectRadius:[]},this.__path="",this.__currentPosition=[],this.__transform_history=[],this.__transform_current="",this.__svg=t}return t.prototype.config=function(t){if("object"!=typeof t)return this.__config[t];for(var e in t)this.__config[e]=t[e];return this},t.prototype.reset=function(t){return void 0===t&&(t={}),this.config(k(t,{fillStyle:"rgb(0,0,0)",strokeStyle:"rgb(0,0,0)",textAlign:"left",textBaseline:"middle",fontSize:16,fontFamily:"sans-serif",arcStartCap:"butt",arcEndCap:"butt",lineDash:[],lineWidth:1,lineCap:"butt",lineJoin:"miter",rectRadius:[]})),this},t.prototype.useEl=function(t){return this.__useEl=t,this},t.prototype.getEl=function(){return this.__useEl},t.prototype.appendEl=function(t,e){return e=e||this.__svg,"string"==typeof t&&(t=d(t)),e.appendChild(t),this.__useEl=t,this},t.prototype.appendBoard=function(t,e){var i=t;if("string"==typeof t&&(i={text:"text",path:"path",arc:"path",circle:"circle",rect:"path"}[t]||""),""==i)throw new Error("Unsupported drawing method:"+t);return this.appendEl(i,e)},t.prototype.remove=function(){if(!this.__useEl)throw new Error("Currently, no node can be deleted.");return this.__useEl.parentNode.removeChild(this.__useEl),this},t.prototype.attr=function(t){if(!this.__useEl)throw new Error("Currently, no node can be modified or viewed.");if("object"!=typeof t)return function(t,e){return p.indexOf(e)>-1&&(e="xlink:"+e),t.getAttribute(e)}(this.__useEl,t);for(var e in t)g(this.__useEl,e,t[e]);return this},t.prototype.fillText=function(t,e,i,n){return void 0===n&&(n=0),P(this.__useEl,this.__config,e,i,n),this.attr({transform:this.__transform_current}),this.__useEl.textContent=t,m(this.__useEl,this.__config),this},t.prototype.strokeText=function(t,e,i,n){return void 0===n&&(n=0),P(this.__useEl,this.__config,e,i,n),this.attr({transform:this.__transform_current}),this.__useEl.textContent=t,w(this.__useEl,this.__config),this},t.prototype.fullText=function(t,e,i,n){return void 0===n&&(n=0),P(this.__useEl,this.__config,e,i,n),this.attr({transform:this.__transform_current}),this.__useEl.textContent=t,y(this.__useEl,this.__config),this},t.prototype.fillArc=function(t,e,i,n,r,o){return R(this.__useEl,this.__config,t,e,i,n,r,o),this.attr({transform:this.__transform_current}),m(this.__useEl,this.__config),this},t.prototype.strokeArc=function(t,e,i,n,r,o){return R(this.__useEl,this.__config,t,e,i,n,r,o),this.attr({transform:this.__transform_current}),w(this.__useEl,this.__config),this},t.prototype.fullArc=function(t,e,i,n,r,o){return R(this.__useEl,this.__config,t,e,i,n,r,o),this.attr({transform:this.__transform_current}),y(this.__useEl,this.__config),this},t.prototype.fillCircle=function(t,e,i){return T(this.__useEl,t,e,i),this.attr({transform:this.__transform_current}),m(this.__useEl,this.__config),this},t.prototype.strokeCircle=function(t,e,i){return T(this.__useEl,t,e,i),this.attr({transform:this.__transform_current}),w(this.__useEl,this.__config),this},t.prototype.fullCircle=function(t,e,i){return T(this.__useEl,t,e,i),this.attr({transform:this.__transform_current}),y(this.__useEl,this.__config),this},t.prototype.fillRect=function(t,e,i,n){return A(this.__useEl,this.__config,t,e,i,n),this.attr({transform:this.__transform_current}),m(this.__useEl,this.__config),this},t.prototype.strokeRect=function(t,e,i,n){return A(this.__useEl,this.__config,t,e,i,n),this.attr({transform:this.__transform_current}),w(this.__useEl,this.__config),this},t.prototype.fullRect=function(t,e,i,n){return A(this.__useEl,this.__config,t,e,i,n),this.attr({transform:this.__transform_current}),y(this.__useEl,this.__config),this},t.prototype.beginPath=function(){return this.__currentPosition=[],this.__path="",this},t.prototype.closePath=function(){return this.__path+="Z",this},t.prototype.moveTo=function(t,e){return this.__currentPosition=[t,e],this.__path+="M"+t+" "+e,this},t.prototype.lineTo=function(t,e){return this.__currentPosition=[t,e],this.__path+=(""==this.__path?"M":"L")+t+" "+e,this},t.prototype.fill=function(){return C(this.__useEl,this.__path),this.attr({transform:this.__transform_current}),m(this.__useEl,this.__config),this},t.prototype.stroke=function(){return C(this.__useEl,this.__path),this.attr({transform:this.__transform_current}),w(this.__useEl,this.__config),this},t.prototype.full=function(){return C(this.__useEl,this.__path),this.attr({transform:this.__transform_current}),y(this.__useEl,this.__config),this},t.prototype.save=function(){return this.__transform_history.push(this.__transform_current),this},t.prototype.restore=function(){return this.__transform_history.length>0&&(this.__transform_current=this.__transform_history.pop()),this},t.prototype.arc=function(t,e,i,n,r){var s=o(t,e,n/180*Math.PI,t+i,e),a=o(t,e,(n+r)/180*Math.PI,t+i,e);return""==this.__path?this.__path+="M"+s[0]+","+s[1]:s[0]==this.__currentPosition[0]&&s[1]==this.__currentPosition[1]||(this.__path+="L"+s[0]+","+s[1]),this.__path+="A"+i+","+i+" 0 "+(r>180||r<-180?1:0)+","+(r>0?1:0)+" "+a[0]+","+a[1],this},t.prototype.quadraticCurveTo=function(t,e,i,n){return this.__path+="Q"+t+" "+e+","+i+" "+n,this},t.prototype.bezierCurveTo=function(t,e,i,n,r,o){return this.__path+="C"+t+" "+e+","+i+" "+n+","+r+" "+o,this},t.prototype.bind=function(t,e){return this.__useEl.addEventListener(t,(function(t){e.call(this,t,this)}),!1),this},t.prototype.createLinearGradient=function(t,e,i,n){return function(t,e,i,n,r){var o=E(t),s="visliteLg"+(new Date).valueOf()+(1e6*Math.random()).toFixed(0),a=d("linearGradient");return o.appendChild(a),g(a,"id",s),g(a,"x1",e+"%"),g(a,"y1",i+"%"),g(a,"x2",n+"%"),g(a,"y2",r+"%"),S(a,s)}(this.__svg,t,e,i,n)},t.prototype.createRadialGradient=function(t,e,i){return function(t,e,i,n){var r=E(t),o="visliteRg"+(new Date).valueOf()+(1e6*Math.random()).toFixed(0),s=d("radialGradient");return r.appendChild(s),g(s,"id",o),g(s,"cx",e+"%"),g(s,"cy",i+"%"),g(s,"r",n+"%"),S(s,o)}(this.__svg,t,e,i)},t.prototype.translate=function(t,e){return this.__transform_current+=" translate("+t+","+e+")",this},t.prototype.rotate=function(t){return this.__transform_current+=" rotate("+t+")",this},t.prototype.install=function(t){var e=this,i=function(i){if(i in n)throw new Error("VISLite SVG:Method already exists and cannot be overwritten.");n[i]=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=t[i].apply(e,n);return null!=o?o:e}},n=this;for(var r in t)i(r);return this},t}(),V=function(t){function e(e){var i=this;if(!e)throw new Error("VISLite SVG:The mount point requires an HTMLElement type but encountered null.");var n=e.clientWidth,r=e.clientHeight,o=document.createElementNS("http://www.w3.org/2000/svg","svg");return e.appendChild(o),o.setAttribute("width",n+""),o.setAttribute("height",r+""),o.setAttribute("viewBox","0 0 "+n+" "+r),(i=t.call(this,o)||this).__el=e,i}return l(e,t),e.prototype.toDataURL=function(){var t=this;return new Promise((function(e){var i=t.__el.clientWidth,n=t.__el.clientHeight,r=document.createElement("img");r.setAttribute("width",i+""),r.setAttribute("height",n+"");var o="data:image/svg+xml;charset=utf-8,<svg xmlns='http://www.w3.org/2000/svg' width='"+i+"' height='"+n+"'>"+t.__svg.innerHTML.replace(/"/g,"'")+"</svg>";r.setAttribute("src",o),setTimeout((function(){var t=document.createElement("canvas");t.setAttribute("width",i+""),t.setAttribute("height",n+"");var o=t.getContext("2d");o&&o.drawImage(r,0,0,i,n),e(t.toDataURL())}),100)}))},e}(L),B=function(t,e,i,n,r){return t.beginPath(),t.translate(i,n),t.rotate(r),t.font=e.fontStyle+" "+e.fontWeight+" "+e.fontSize+"px "+e.fontFamily,t},U=function(t,e,i,n,r,o,s,a){if(r>o){var h=r;r=o,o=h}return s%=2*Math.PI,a>=1.999999*Math.PI||a<=1.999999*-Math.PI?a=2*Math.PI:a%=2*Math.PI,b(s,a,i,n,r,o,(function(s,a,h,_,u,l,c,p,f,d,v){v<0&&(v=-v),t.beginPath(),t.moveTo(h,_),t.arc(i,n,r,s,a,!1),"round"==e.arcEndCap?t.arc(.5*(c+f),.5*(p+d),v,a-Math.PI,a,!0):"-round"==e.arcEndCap?t.arc(.5*(c+f),.5*(p+d),v,a-Math.PI,a,!1):t.lineTo(f,d),t.arc(i,n,o,a,s,!0),"round"==e.arcStartCap?t.arc(.5*(h+u),.5*(_+l),v,s,s-Math.PI,!0):"-round"==e.arcStartCap?t.arc(.5*(h+u),.5*(_+l),v,s,s-Math.PI,!1):t.lineTo(h,_)})),"butt"==e.arcStartCap&&t.closePath(),t},z=function(t,e,i,n){return t.beginPath(),t.moveTo(e+n,i),t.arc(e,i,n,0,2*Math.PI),t},N=function(t,e,i,n,r,o){t.beginPath();var s=[];if(Array.isArray(e.rectRadius)&&e.rectRadius.length>0)for(var a=0;a<4;a++)s.push.apply(s,e.rectRadius);return s.length>=4?(t.arc(i+s[0],n+s[0],s[0],Math.PI,1.5*Math.PI),t.arc(i+r-s[1],n+s[1],s[1],1.5*Math.PI,0),t.arc(i+r-s[2],n+o-s[2],s[2],0,.5*Math.PI),t.arc(i+s[3],n+o-s[3],s[3],.5*Math.PI,Math.PI),t.closePath()):t.rect(i,n,r,o),t};function D(t,e,i,n,r){for(var o=0,s="",a=0;a<e.length;a++)t.measureText(s+e[a]).width>i||/\n$/.test(s)?(r(s,((o+=1)-.5)*n),s=e[a]):a==e.length-1?(o+=1,r(s+e[a],(o-.5)*n)):s+=e[a];return o*n}function F(t){var e={fontSize:16,fontFamily:"sans-serif",fontWeight:400,fontStyle:"normal",arcStartCap:"butt",arcEndCap:"butt",rectRadius:[]},i={fillStyle:"black",strokeStyle:"black",lineWidth:1,lineCap:"butt",lineJoin:"miter",lineDash:[],textAlign:"left",textBaseline:"middle",shadowBlur:0,shadowColor:"black"};return"special"==t?e:"init"==t?i:c(c({},e),i)}var j=function(){function t(t,e,i,n,r){void 0===e&&(e={}),void 0===n&&(n=!1),this.__region=null,this.__onlyRegion=!1,this.__onlyView=!1,this.__specialConfig=F("special"),this.__initConfig=F("init"),this.painter=t.getContext("2d",e),this.__region=i,this.__isPainter=n,this.painter.textBaseline="middle",this.painter.textAlign="left"}return t.prototype.useConfig=function(t,e){if(this.__region&&!this.__onlyView&&["fillStyle","strokeStyle","shadowBlur","shadowColor"].indexOf(t)<0&&this.__region.useConfig(t,e),this.__isPainter&&this.__onlyRegion)return this;if("lineDash"==t)this.painter.setLineDash&&this.painter.setLineDash(e);else if(t in this.__specialConfig)"fontSize"==t&&(e=Math.round(e)),this.__specialConfig[t]=e;else{if(!(t in this.__initConfig))throw new Error("Illegal configuration item of painter : "+t+" !");this.painter[t]=e}return this},t.prototype.fillText=function(t,e,i,n){return void 0===n&&(n=0),this.__region&&!this.__onlyView&&this.__region.fillText(t,e,i,n),this.__isPainter&&this.__onlyRegion||(this.painter.save(),B(this.painter,this.__specialConfig,e,i,n).fillText(t,0,0),this.painter.restore()),this},t.prototype.strokeText=function(t,e,i,n){return void 0===n&&(n=0),this.__region&&!this.__onlyView&&this.__region.strokeText(t,e,i,n),this.__isPainter&&this.__onlyRegion||(this.painter.save(),B(this.painter,this.__specialConfig,e,i,n).strokeText(t,0,0),this.painter.restore()),this},t.prototype.fullText=function(t,e,i,n){return void 0===n&&(n=0),this.__region&&!this.__onlyView&&this.__region.fullText(t,e,i,n),this.__isPainter&&this.__onlyRegion||(this.painter.save(),B(this.painter,this.__specialConfig,e,i,n),this.painter.fillText(t,0,0),this.painter.strokeText(t,0,0),this.painter.restore()),this},t.prototype.fillTexts=function(t,e,i,n,r,o){var s=this;void 0===r&&(r=1.2),void 0===o&&(o=0);var a=0;if(this.__region&&!this.__onlyView&&(a=this.__region.fillTexts(t,e,i,n,r)),this.__isPainter&&this.__onlyRegion)return a;this.painter.save(),B(this.painter,this.__specialConfig,e,i,o);var h=D(this.painter,t,n,this.__specialConfig.fontSize*r,(function(t,e){s.painter.fillText(t,0,e)}));return this.painter.restore(),h},t.prototype.strokeTexts=function(t,e,i,n,r,o){var s=this;void 0===r&&(r=1.2),void 0===o&&(o=0);var a=0;if(this.__region&&!this.__onlyView&&(a=this.__region.fillTexts(t,e,i,n,r)),this.__isPainter&&this.__onlyRegion)return a;this.painter.save(),B(this.painter,this.__specialConfig,e,i,o);var h=D(this.painter,t,n,this.__specialConfig.fontSize*r,(function(t,e){s.painter.strokeText(t,0,e)}));return this.painter.restore(),h},t.prototype.fullTexts=function(t,e,i,n,r,o){var s=this;void 0===r&&(r=1.2),void 0===o&&(o=0);var a=0;if(this.__region&&!this.__onlyView&&(a=this.__region.fillTexts(t,e,i,n,r)),this.__isPainter&&this.__onlyRegion)return a;this.painter.save(),B(this.painter,this.__specialConfig,e,i,o);var h=D(this.painter,t,n,this.__specialConfig.fontSize*r,(function(t,e){s.painter.fillText(t,0,e),s.painter.strokeText(t,0,e)}));return this.painter.restore(),h},t.prototype.beginPath=function(){return this.__region&&!this.__onlyView&&this.__region.beginPath(),this.__isPainter&&this.__onlyRegion||this.painter.beginPath(),this},t.prototype.closePath=function(){return this.__region&&!this.__onlyView&&this.__region.closePath(),this.__isPainter&&this.__onlyRegion||this.painter.closePath(),this},t.prototype.moveTo=function(t,e){return this.__region&&!this.__onlyView&&this.__region.moveTo(t,e),this.__isPainter&&this.__onlyRegion||this.painter.moveTo(Math.round(t)+.5,Math.round(e)+.5),this},t.prototype.lineTo=function(t,e){return this.__region&&!this.__onlyView&&this.__region.lineTo(t,e),this.__isPainter&&this.__onlyRegion||this.painter.lineTo(Math.round(t)+.5,Math.round(e)+.5),this},t.prototype.arc=function(t,e,i,n,r){return this.__region&&!this.__onlyView&&this.__region.arc(t,e,i,n,r),this.__isPainter&&this.__onlyRegion||this.painter.arc(t,e,i,n,n+r,r<0),this},t.prototype.fill=function(){return this.__region&&!this.__onlyView&&this.__region.fill(),this.__isPainter&&this.__onlyRegion||this.painter.fill(),this},t.prototype.stroke=function(){return this.__region&&!this.__onlyView&&this.__region.stroke(),this.__isPainter&&this.__onlyRegion||this.painter.stroke(),this},t.prototype.full=function(){return this.__region&&!this.__onlyView&&this.__region.full(),this.__isPainter&&this.__onlyRegion||(this.painter.fill(),this.painter.stroke()),this},t.prototype.save=function(){return this.__region&&!this.__onlyView&&this.__region.save(),this.__isPainter&&this.__onlyRegion||this.painter.save(),this},t.prototype.restore=function(){return this.__region&&!this.__onlyView&&this.__region.restore(),this.__isPainter&&this.__onlyRegion||this.painter.restore(),this},t.prototype.clip=function(){return this.__region&&!this.__onlyView&&this.__region.clip(),this.__isPainter&&this.__onlyRegion||this.painter.clip(),this},t.prototype.quadraticCurveTo=function(t,e,i,n){return this.__region&&!this.__onlyView&&this.__region.quadraticCurveTo(t,e,i,n),this.__isPainter&&this.__onlyRegion||this.painter.quadraticCurveTo(t,e,i,n),this},t.prototype.bezierCurveTo=function(t,e,i,n,r,o){return this.__region&&!this.__onlyView&&this.__region.bezierCurveTo(t,e,i,n,r,o),this.__isPainter&&this.__onlyRegion||this.painter.bezierCurveTo(t,e,i,n,r,o),this},t.prototype.clearRect=function(t,e,i,n){return this.__region&&!this.__onlyView&&this.__region.clearRect(t,e,i,n),this.__isPainter&&this.__onlyRegion||this.painter.clearRect(t,e,i,n),this},t.prototype.clearCircle=function(t,e,i){return this.__region&&!this.__onlyView&&this.__region.clearCircle(t,e,i),this.__isPainter&&this.__onlyRegion||(this.painter.beginPath(),this.painter.globalCompositeOperation="destination-out",this.painter.arc(t,e,i,0,2*Math.PI),this.painter.fill(),this.painter.globalCompositeOperation="source-over",this.painter.closePath()),this},t.prototype.fillArc=function(t,e,i,n,r,o){return this.__region&&!this.__onlyView&&this.__region.fillArc(t,e,i,n,r,o),this.__isPainter&&this.__onlyRegion||U(this.painter,this.__specialConfig,t,e,i,n,r,o).fill(),this},t.prototype.strokeArc=function(t,e,i,n,r,o){return this.__region&&!this.__onlyView&&this.__region.strokeArc(t,e,i,n,r,o),this.__isPainter&&this.__onlyRegion||U(this.painter,this.__specialConfig,t,e,i,n,r,o).stroke(),this},t.prototype.fullArc=function(t,e,i,n,r,o){return this.__region&&!this.__onlyView&&this.__region.fullArc(t,e,i,n,r,o),this.__isPainter&&this.__onlyRegion||(U(this.painter,this.__specialConfig,t,e,i,n,r,o),this.painter.fill(),this.painter.stroke()),this},t.prototype.fillCircle=function(t,e,i){return this.__region&&!this.__onlyView&&this.__region.fillCircle(t,e,i),this.__isPainter&&this.__onlyRegion||z(this.painter,t,e,i).fill(),this},t.prototype.strokeCircle=function(t,e,i){return this.__region&&!this.__onlyView&&this.__region.strokeCircle(t,e,i),this.__isPainter&&this.__onlyRegion||z(this.painter,t,e,i).stroke(),this},t.prototype.fullCircle=function(t,e,i){return this.__region&&!this.__onlyView&&this.__region.fullCircle(t,e,i),this.__isPainter&&this.__onlyRegion||(z(this.painter,t,e,i),this.painter.fill(),this.painter.stroke()),this},t.prototype.fillRect=function(t,e,i,n){return this.__region&&!this.__onlyView&&this.__region.fillRect(t,e,i,n),this.__isPainter&&this.__onlyRegion||N(this.painter,this.__specialConfig,t,e,i,n).fill(),this},t.prototype.strokeRect=function(t,e,i,n){return this.__region&&!this.__onlyView&&this.__region.strokeRect(t,e,i,n),this.__isPainter&&this.__onlyRegion||N(this.painter,this.__specialConfig,t,e,i,n).stroke(),this},t.prototype.fullRect=function(t,e,i,n){return this.__region&&!this.__onlyView&&this.__region.fullRect(t,e,i,n),this.__isPainter&&this.__onlyRegion||(N(this.painter,this.__specialConfig,t,e,i,n),this.painter.fill(),this.painter.stroke()),this},t.prototype.draw=function(){return Promise.resolve()},t.prototype.drawImage=function(t,e,i,n,r,o){var s=this;return void 0===o&&(o=!1),new Promise((function(a){if(s.__region&&!s.__onlyView&&s.__region.fillRect(e,i,n,r),s.__isPainter&&s.__onlyRegion)a({});else if("string"!=typeof t||o)s.painter.drawImage(t,e,i,n,r),a({});else{var h=new Image;h.onload=function(){s.painter.drawImage(h,e,i,n,r),a({})},h.src=t}}))},t.prototype.translate=function(t,e){return this.painter.translate(t,e),this},t.prototype.rotate=function(t){return this.painter.rotate(t),this},t.prototype.install=function(t){var e=this,i=function(i){if(i in n)throw new Error("VISLite Canvas:Method already exists and cannot be overwritten.");n[i]=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=t[i].apply(e,n);return null!=o?o:e}},n=this;for(var r in t)i(r);return this},t}();function H(t,e,i,n){for(var r=[],o=0;o<n;o++)r[o]=t;return function(){for(var o=0;o<n;o++){if(r[o]+i<e){r[o]=+(r[o]+i).toFixed(7);break}o<n-1&&(r[o]=t)}return r}}var $=function(t,e){var i={value:function(){return t},setColor:function(n,r){return t.addColorStop(e?e(n):n,r),i}};return i},G=function(t){function e(e,i,n,r){void 0===n&&(n={}),void 0===r&&(r=1);var o=t.call(this,e,n,i?new j(i,{willReadFrequently:!0}):void 0,!0,r)||this;return o.name="Canvas",o.__regionList={},o.__regionAssemble=H(0,255,10,3),o.__scaleSize=r,o.setRegion(""),o}return l(e,t),e.prototype.config=function(t){for(var e in t)this.useConfig(e,t[e]);return this},e.prototype.reset=function(t){return void 0===t&&(t={}),this.config(k(t,F())),this},e.prototype.onlyRegion=function(t){return this.__onlyRegion=t,this},e.prototype.onlyView=function(t){return this.__onlyView=t,this},e.prototype.setRegion=function(t){if(this.__region)if(t){if(null==this.__regionList[t]){var e=this.__regionAssemble();this.__regionList[t]="rgb("+e[0]+","+e[1]+","+e[2]+")"}this.__region.useConfig("fillStyle",this.__regionList[t])&&this.__region.useConfig("strokeStyle",this.__regionList[t])}else this.__region.useConfig("fillStyle","#000000")&&this.__region.useConfig("strokeStyle","#000000");return this},e.prototype.getRegion=function(t,e){var i=this;return new Promise((function(n){var r=i.__region?i.__region.painter.getImageData(t-.5,e-.5,1,1):{data:[0,0,0,0]},o=r.data,s=function(){if(i.__region)for(var t in i.__regionList)if("rgb("+o[0]+","+o[1]+","+o[2]+")"==i.__regionList[t]){n(t);break}n("")};o?s():r.then((function(t){o=t,s()}))}))},e.prototype.textWidth=function(t){this.painter.save(),B(this.painter,this.__specialConfig,0,0,0);var e=this.painter.measureText(t+"").width;return this.painter.restore(),e},e.prototype.getContext=function(t){return void 0===t&&(t=!1),t?this.__region?this.__region.painter:null:this.painter},e.prototype.getInfo=function(){return{width:this.painter.canvas.width/this.__scaleSize,height:this.painter.canvas.height/this.__scaleSize}},e.prototype.createLinearGradient=function(t,e,i,n){return function(t,e,i,n,r){var o=t.createLinearGradient(e,i,n,r);return $(o)}(this.painter,t,e,i,n)},e.prototype.createRadialGradient=function(t,e,i){return function(t,e,i,n){var r=t.createRadialGradient(e,i,0,e,i,n);return $(r)}(this.painter,t,e,i)},e.prototype.createConicGradient=function(t,e,i,n){return function(t,e,i,n,r){var o=t.createConicGradient(n,e,i);return $(o,r?function(t){return r/(2*Math.PI)*t}:void 0)}(this.painter,t,e,i,n)},e.prototype.getColor=function(t,e){t*=this.__scaleSize,e*=this.__scaleSize;var i=this.painter.getImageData(t-.5,e-.5,1,1).data;return"rgba("+i[0]+","+i[1]+","+i[2]+","+i[3]+")"},e}(j),q=function(t){function e(e,i,n,r){void 0===i&&(i={}),void 0===n&&(n=0),void 0===r&&(r=0);var o=this;if(!e)throw new Error("VISLite Canvas:The mount point requires an HTMLElement type but encountered null.");i=k(i,{scale:2,region:!0,willReadFrequently:!1}),n=n||e.clientWidth,r=r||e.clientHeight;var s,a=null,h=e;h._vislite_canvas_?(s=h._vislite_canvas_[0],a=h._vislite_canvas_[1]):(s=document.createElement("canvas"),e.appendChild(s),i.region&&(a=document.createElement("canvas")),h._vislite_canvas_=[s,a],e.setAttribute("vislite","Canvas"));for(var _=[a,s],u=0;u<_.length;u++){var l=_[u];l&&(l.style.width=n+"px",l.setAttribute("width",(1===u?i.scale:1)*n+""),l.style.height=r+"px",l.setAttribute("height",(1===u?i.scale:1)*r+""))}return(o=t.call(this,s,a,{willReadFrequently:i.willReadFrequently},i.scale)||this).__canvas=s,o.__el=e,o.painter.scale(i.scale,i.scale),o}return l(e,t),e.prototype.toDataURL=function(t,e){var i=this;return void 0===t&&(t="image/png"),void 0===e&&(e=.92),new Promise((function(n){n(i.__canvas.toDataURL(t,e))}))},e.prototype.bind=function(t,e){var i=this;return this.__el.addEventListener(t,(function(t){i.getRegion(t.offsetX,t.offsetY).then((function(i){e(i,t.offsetX,t.offsetY)}))})),this},e}(G),X=function(t,e,i){var n=t.createShader(e);if(null==n)throw new Error("Unable to create shader!");if(t.shaderSource(n,i),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw new Error("Failed to compile shader:"+t.getShaderInfoLog(n));return n},W=function(){function t(t){this.__painter=t}return t.prototype.use=function(){return this.__painter.useProgram(this.program),this},t.prototype.compile=function(t,e){return this.program=function(t,e,i){var n=X(t,t.VERTEX_SHADER,e),r=X(t,t.FRAGMENT_SHADER,i),o=t.createProgram();if(t.attachShader(o,n),t.attachShader(o,r),t.linkProgram(o),!t.getProgramParameter(o,t.LINK_STATUS))throw new Error("Failed to link program: "+t.getProgramInfoLog(o));return o}(this.__painter,t,e),this},t}(),Y=function(){function t(t,e,i){void 0===i&&(i=0),this.__painter=t,this.__type={"2d":t.TEXTURE_2D,cube:t.TEXTURE_CUBE_MAP}[e],this.__texture=function(t,e,i){var n=t.createTexture();return t.activeTexture(t["TEXTURE"+i]),t.bindTexture(e,n),n}(t,this.__type,i),t.texParameteri(this.__type,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(this.__type,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(this.__type,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(this.__type,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)}return t.prototype.useImage=function(t){return function(t,e,i,n,r,o){t.texImage2D(e,0,n,n,r,o)}(this.__painter,this.__type,0,this.__painter.RGBA,this.__painter.UNSIGNED_BYTE,t),this},t.prototype.useCube=function(t,e,i){return function(t,e,i,n,r,o,s,a,h){for(var _,u=[t.TEXTURE_CUBE_MAP_POSITIVE_X,t.TEXTURE_CUBE_MAP_NEGATIVE_X,t.TEXTURE_CUBE_MAP_POSITIVE_Y,t.TEXTURE_CUBE_MAP_NEGATIVE_Y,t.TEXTURE_CUBE_MAP_POSITIVE_Z,t.TEXTURE_CUBE_MAP_NEGATIVE_Z],l=0;l<u.length;l++)o[l]&&(_=u[l],t.texImage2D(_,0,n,s,a,0,n,r,null),t.bindTexture(e,h),t.texImage2D(_,0,n,n,r,o[l]));t.generateMipmap(e)}(this.__painter,this.__type,0,this.__painter.RGBA,this.__painter.UNSIGNED_BYTE,t,e,i,this.__texture),this},t}(),J=function(){function t(t,e){void 0===e&&(e=!1),this.__painter=t,this.__isElement=e,this.__buffer=function(t){return t.createBuffer()}(t),this.__type=e?t.ELEMENT_ARRAY_BUFFER:t.ARRAY_BUFFER}return t.prototype.use=function(){return this.__painter.bindBuffer(this.__type,this.__buffer),this},t.prototype.write=function(t){return function(t,e,i,n){var r=i?t.ELEMENT_ARRAY_BUFFER:t.ARRAY_BUFFER;t.bufferData(r,e,n)}(this.__painter,t,this.__isElement,this.__painter.STATIC_DRAW),this.__fsize=t.BYTES_PER_ELEMENT,this},t.prototype.divide=function(t,e,i,n){return void 0===n&&(n=0),function(t,e,i,n,r,o){t.vertexAttribPointer(e,i,n,!1,r,o),t.enableVertexAttribArray(e)}(this.__painter,t,e,this.__painter.FLOAT,i*this.__fsize,n*this.__fsize),this},t}(),Z=function(t,e,i,n){var r=Math.cos(t),o=Math.sin(t);return[e*r-i*o,e*o+i*r,n]},Q=function(){function t(t,e){void 0===t&&(t=7),void 0===e&&(e=[107,36]),this.name="Eoap",this.__scale=t,this.__center=e}return t.prototype.use=function(t,e){var i,n,r,o,s=(i=(360-e)/180*Math.PI,n=100*this.__scale,r=Math.cos(i),[0*(o=Math.sin(i))+n*r,0,0*r-n*o]);return s=Z(t/180*Math.PI,s[0],s[1],s[2]),s=Z((90-this.__center[0])/180*Math.PI,s[0],s[1],s[2]),s=function(t,e,i,n){var r=Math.cos(t),o=Math.sin(t);return[e,i*r-n*o,i*o+n*r]}((90-this.__center[1])/180*Math.PI,s[0],s[1],s[2]),[-s[0],s[1],s[2]]},t}(),K=function(t,e){void 0===t&&(t=7),void 0===e&&(e=[107,36]),this.name="Mercator";var i=100*t*Math.PI/180,n=i*e[0],r=-1*i*e[1];this.use=function(t,e){return[.8*(i*t-n),-1*i*e-r,0]}};function tt(t){for(var e=null,i=null,n=null,r=null,o=function(t){for(var o=0;o<t.length;o++)for(var s=0;s<t[o].length;s++){var a=t[o][s][0],h=t[o][s][1];(null==e||e>a)&&(e=a),(null==i||i<a)&&(i=a),(null==n||n>h)&&(n=h),(null==r||r<h)&&(r=h)}},s=t.features,a=0;a<s.length;a++)if("Polygon"==s[a].geometry.type)o(s[a].geometry.coordinates);else if("MultiPolygon"==s[a].geometry.type)for(var h=0;h<s[a].geometry.coordinates.length;h++)o(s[a].geometry.coordinates[h]);return[e,i,n,r]}function et(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=null,n=null,r=null,o=null,s=0,a=t;s<a.length;s++){var h=tt(a[s]),_=h[0],u=h[1],l=h[2],c=h[3];(null==i||_<i)&&(i=_),(null==n||u>n)&&(n=u),(null==r||l<r)&&(r=l),(null==o||c>o)&&(o=c)}return[i,n,r,o]}var it=function(){function t(t){void 0===t&&(t={}),this.name="MapCoordinate",this.__config=k(t,{api:"Mercator",width:400,height:300,left:0,top:0})}return t.prototype.$$updateMap=function(){var t=this.__boundary,e=t[0],i=t[1],n=t[2],r=t[3];if("Eoap"==this.__config.api){var o=.836*this.__config.width/(i-e),s=.557*this.__config.height/(r-n);this.__map=new Q(o<s?o:s,[.5*(e+i)*.9778,.5*(n+r)*1.025])}else{if("Mercator"!=this.__config.api)throw new Error("Unexpected API types:"+this.__config.api);o=.72*this.__config.width/(i-e),s=.575*this.__config.height/(r-n),this.__map=new K(o<s?o:s,[.5*(e+i),.5*(n+r)])}},t.prototype.setConfig=function(t){return O(this.__config,t),this.$$updateMap(),this},t.prototype.setGeos=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.__boundary=et.apply(void 0,t),this.$$updateMap(),this},t.prototype.use=function(t,e){if(this.__map){var i=this.__map.use(t,e);return[this.__config.left+.5*this.__config.width+i[0],this.__config.top+.5*this.__config.height+i[1]]}throw new Error("Geographic data not set")},t}(),nt=function(){function t(t){void 0===t&&(t={}),this.name="Tree",this.__config=k(t,{root:function(t){return t},children:function(t){return t.children},id:function(t){return t.name}})}return t.prototype.use=function(t,e){return void 0===e&&(e={}),function(t,e,i){void 0===i&&(i={});var n=function(t,e){var i,n,r={},o=e.root(t);i=n=e.id(o),r[i]={data:o,pid:null,id:i,isOpen:!0,show:!0,deg:0,children:[]};var s=1;return function n(o,a){var h=e.children(o,t);s+=h?h.length:0;for(var _=0;h&&_<h.length;_++)i=e.id(h[_]),r[a].children.push(i),r[i]={data:h[_],pid:a,id:i,isOpen:!0,show:!0,deg:0,children:[]},n(h[_],i)}(o,i),{rid:n,value:r,num:s}}(t,e),r=n.value,o=n.rid;if(1==n.num)return r[o].left=.5,r[o].top=.5,r[o].show=!0,{deep:1,node:r,root:o,size:1};var s=[],a=0,h=0;for(var _ in i[o]?(r[o].left=.5,r[o].top=.5,r[o].show=!0,a=1):function t(e,n){n>h&&(h=n);var o=0;if(!i[e.id])for(o=0;o<e.children.length;o++)t(r[e.children[o]],n+1);if(r[e.id].left=n+.5,0==o?(null==s[n]&&(s[n]=-.5),null==s[n-1]&&(s[n-1]=-.5),r[e.id].top=s[n]+1,s[n]+1+.5*(r[e.pid].children.length-1)-1<s[n-1]&&(r[e.id].top=s[n-1]+1-.5*(r[e.pid].children.length-1))):r[e.id].top=.5*(r[e.children[0]].top+r[e.children[o-1]].top),r[e.id].top<=s[n])var _=s[n]+1-r[e.id].top((function t(e,i){r[e].top+=_,s[i]<r[e].top&&(s[i]=r[e].top);for(var n=0;n<r[e].children.length;n++)t(r[e].children[n],i+1)}))(e.id,n);s[n]=r[e.id].top,r[e.id].top+.5>a&&(a=r[e.id].top+.5)}(r[o],0),i)i[_]&&(r[_].isOpen=!1,function t(e,i,n){for(var o=0;o<r[e].children.length;o++)r[r[e].children[o]].left=i,r[r[e].children[o]].top=n,r[r[e].children[o]].show=!1,t(r[e].children[o],i,n)}(_,r[_].left,r[_].top));return{node:r,root:o,size:a,deep:h+1}}(t,this.__config,e)},t}(),rt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="TreeLayout",e.__option={offsetX:0,offsetY:0,duration:500,type:"plain",direction:"LR",x:100,y:100,width:100,height:100,radius:100},e.__noOpens={},e}return l(e,t),e.prototype.setOption=function(t){return k(t,this.__option),this},e.prototype.use=function(e,i){void 0===i&&(i={});var n=t.prototype.use.call(this,e,i);if(0!=this.__option.offsetX||0!=this.__option.offsetY)for(var r in n.node)if(!n.node[r].show){var s=0,a=r;do{a=n.node[a].pid,s++}while(!n.node[a].show);n.node[r].left+=this.__option.offsetX*s,n.node[r].top+=this.__option.offsetY*s}if("rect"==this.__option.type){if("LR"==this.__option.direction||"RL"==this.__option.direction){var h=this.__option.height/n.size,_=this.__option.width/(n.deep-1),u=this.__option.y-.5*this.__option.height,l="LR"==this.__option.direction?1:-1;for(var r in n.node)1==n.deep?(n.node[r].left=this.__option.x+.5*this.__option.width*l,n.node[r].top=this.__option.y):(n.node[r].left=this.__option.x+(n.node[r].left-.5)*_*l,n.node[r].top=n.node[r].top*h+u)}else if("TB"==this.__option.direction||"BT"==this.__option.direction)for(var r in h=this.__option.width/n.size,_=this.__option.height/(n.deep-1),u=this.__option.x-.5*this.__option.width,l="TB"==this.__option.direction?1:-1,n.node)if(n.node[r].deg="TB"==this.__option.direction?.5*Math.PI:-.5*Math.PI,1==n.deep)n.node[r].left=this.__option.x,n.node[r].top=this.__option.y+.5*this.__option.height*l;else{var c=n.node[r].left;n.node[r].left=n.node[r].top*h+u,n.node[r].top=this.__option.y+(c-.5)*_*l}}else if("circle"==this.__option.type){var p=this.__option.x,f=this.__option.y,d=2*Math.PI/n.size,v=this.__option.radius/(n.deep-1);for(var r in n.node)if(.5==n.node[r].left)n.node[r].left=p,n.node[r].top=f;else{var g=o(p,f,d*n.node[r].top,p+(n.node[r].left-.5)*v,f);n.node[r].deg=d*n.node[r].top,n.node[r].left=g[0],n.node[r].top=g[1]}}return n},e.prototype.bind=function(t,e,i){return void 0===i&&(i={}),this.__rback=e,this.__oralTree=t,this.__noOpens=i,this.__preTree=this.use(this.__oralTree,this.__noOpens),this.__rback(this.__preTree),this},e.prototype.unbind=function(){return this.__rback=function(){return null},this.__oralTree=null,this.__preTree=null,this.__noOpens={},this},e.prototype.doUpdate=function(){var t=this,e=this.use(this.__oralTree,this.__noOpens),i=JSON.parse(JSON.stringify(e));return h((function(n){if(t.__preTree)for(var r in i.node)(e.node[r].show||t.__preTree.node[r].show)&&(i.node[r].show=!0,i.node[r].left=t.__preTree.node[r].left+(e.node[r].left-t.__preTree.node[r].left)*n,i.node[r].top=t.__preTree.node[r].top+(e.node[r].top-t.__preTree.node[r].top)*n);t.__rback(i)}),this.__option.duration,(function(){t.__preTree=e,t.__rback(t.__preTree)})),this},e.prototype.closeNode=function(t){return this.__preTree?(this.__noOpens[t]=!0,this.doUpdate(),this):this},e.prototype.openNode=function(t){return this.__preTree?(this.__noOpens[t]=!1,this.doUpdate(),this):this},e.prototype.toggleNode=function(t){return this.__preTree?(this.__noOpens[t]=!this.__noOpens[t],this.doUpdate(),this):this},e}(nt),ot=function(){function t(t){void 0===t&&(t={}),this.name="PieLayout",this.__option={cx:200,cy:200,radius:[50,100],duration:200},this.__hoverIndex=-1,this.__config=k(t,{name:function(t,e){return t.name},value:function(t,e){return t.value}})}return t.prototype.setOption=function(t){return k(t,this.__option),this},t.prototype.use=function(t,e){void 0===e&&(e=-1);for(var i={count:t.length,cx:this.__option.cx,cy:this.__option.cy,radius:this.__option.radius,hoverIndex:e,node:[]},n=0,r=[],s=[],a=0;a<t.length;a++)r[a]=this.__config.name(t[a],t),s[a]=this.__config.value(t[a],t),n+=s[a];var h,_=-.5*Math.PI;for(a=0;a<t.length;a++){h=s[a]/n*Math.PI*2;var u=[this.__option.radius[0],this.__option.radius[1]*(1+(e===a?.05:0))],l=_+.5*h,c=Math.max(this.__option.radius[0],this.__option.radius[1]),p=o(i.cx,i.cy,l,i.cx+c,i.cy),f=o(i.cx,i.cy,l,i.cx+c+15,i.cy),d=p[0]>i.cx?1:-1,v=[f[0]+20*d,f[1]],g=[f[0]+25*d,f[1]];i.node[a]={value:s[a],name:r[a],beginDeg:_,deg:h,isHover:e===a,radius:u,label:{line:[p,f,v],position:g,align:-1===d?"right":"left"}},_+=h}return i},t.prototype.bind=function(t,e){return this.__rback=e,this.__oralPie=t,this.__prePie=this.use(this.__oralPie,this.__hoverIndex),this.__rback(this.__prePie),this},t.prototype.unbind=function(){return this.__rback=function(){return null},this.__oralPie=null,this.__prePie=null,this.__hoverIndex=-1,this},t.prototype.setHover=function(t){return this.__prePie&&this.__hoverIndex!==t?(this.__hoverIndex=t,this.doUpdate(),this):this},t.prototype.doUpdate=function(){var t=this,e=this.use(this.__oralPie,this.__hoverIndex),i=JSON.parse(JSON.stringify(e));return h((function(n){if(t.__prePie)for(var r=0;r<i.count;r++)i.node[r].radius[1]=t.__prePie.node[r].radius[1]+(e.node[r].radius[1]-t.__prePie.node[r].radius[1])*n;t.__rback(i)}),this.__option.duration,(function(){t.__prePie=e,t.__rback(t.__prePie)})),this},t}(),st=function(){function t(t){void 0===t&&(t={}),this.name="BarLayout",this.__option={x:50,y:350,width:400,height:300,category:"xAxis",duration:200},this.__config=k(t,{})}return t.prototype.setOption=function(t){return k(t,this.__option),this},t.prototype.use=function(t){var e={coordinate:{x:this.__option.x,y:this.__option.y,width:this.__option.width,height:this.__option.height,xAxis:{type:"xAxis"===this.__option.category?"category":"value",data:[]},yAxis:{type:"xAxis"===this.__option.category?"value":"category",data:[]}},node:[]},i=void 0,n=void 0;if(t.data)for(var r=0,o=t.data;r<o.length;r++){var s=o[r];(void 0===i||s>i)&&(i=s),(void 0===n||s<n)&&(n=s)}else{if(!t.value)throw new Error("No data leads to parsing errors");for(var a=0,h=t.value;a<h.length;a++)for(var u=0,l=h[a].data;u<l.length;u++)s=l[u],(void 0===i||s>i)&&(i=s),(void 0===n||s<n)&&(n=s)}var c,p,f=_(i||0,n||0,5);"xAxis"===this.__option.category?(e.coordinate.xAxis.data=t.category,e.coordinate.yAxis.data=f,c=this.__option.width,p=-1*this.__option.height):(e.coordinate.xAxis.data=f,e.coordinate.yAxis.data=t.category,c=this.__option.height,p=this.__option.width);var d=[],v=c/t.category.length,g=.9*v,y=.05*v;if(t.data)for(var m=0;m<t.data.length;m++)d.push([y+v*m,g]);else{var w=g/t.value.length,x=.9*w,b=.05*w;for(m=0;m<t.value[0].data.length;m++){d[m]=[];for(var E=0;E<t.value.length;E++)d[m].push([y+v*m+w*E+b,x])}}var P=p/(f[f.length-1]-f[0]),T=function(t){return P*(t-f[0])};if("xAxis"===this.__option.category)if(t.data){var C=[];for(m=0;m<t.data.length;m++)C.push({x:this.__option.x+d[m][0],y:this.__option.y,width:d[m][1],height:T(t.data[m]),value:t.data[m]});e.node.push({bar:C})}else for(E=0;E<t.value.length;E++){for(C=[],m=0;m<t.value[E].data.length;m++)C.push({x:this.__option.x+d[m][E][0],y:this.__option.y,width:d[m][E][1],height:T(t.value[E].data[m]),value:t.value[E].data[m]});e.node.push({name:t.value[E].name,bar:C})}else if(t.data){for(C=[],m=0;m<t.data.length;m++)C.push({x:this.__option.x,y:this.__option.y-this.__option.height+d[m][0],width:T(t.data[m]),height:d[m][1],value:t.data[m]});e.node.push({bar:C})}else for(E=0;E<t.value.length;E++){for(C=[],m=0;m<t.value[E].data.length;m++)C.push({x:this.__option.x,y:this.__option.y-this.__option.height+d[m][E][0],width:T(t.value[E].data[m]),height:d[m][E][1],value:t.value[E].data[m]});e.node.push({name:t.value[E].name,bar:C})}return e},t.prototype.bind=function(t,e){return this.__rback=e,this.__oralBar=t,this.__preBar=this.use(this.__oralBar),this.__rback(this.__preBar),this},t.prototype.unbind=function(){return this.__rback=function(){return null},this.__oralBar=null,this.__preBar=null,this},t.prototype.doUpdate=function(){var t=this,e=this.use(this.__oralBar),i=JSON.parse(JSON.stringify(e));return h((function(e){t.__preBar||t.__rback(i)}),this.__option.duration,(function(){t.__preBar=e,t.__rback(t.__preBar)})),this},t}(),at={Cardinal:e,Hermite:t,Matrix4:r,rotate:o,move:function(t,e,i,n,r){var o=Math.sqrt(t*t+e*e);return[t*i/o+n,e*i/o+r]},scale:function(t,e,i,n,r){return[i*(n-t)+t,i*(r-e)+e]},getLoopColors:function(t,e,i){void 0===e&&(e=1);var n=i?i(e):["rgba(84,112,198,"+e+")","rgba(145,204,117,"+e+")","rgba(250,200,88,"+e+")","rgba(238,102,102,"+e+")","rgba(115,192,222,"+e+")","rgba(59,162,114,"+e+")","rgba(252,132,82,"+e+")","rgba(154,96,180,"+e+")","rgba(234,124,204,"+e+")"],r=[];if(t<=n.length)return n;if(t%n.length==0)for(var o=0;o<t/n.length;o++)r=r.concat(n);else{for(var s=1;s<t/n.length;s++)r=r.concat(n);if(t%n.length==1)r=r.concat(n[4]);else for(var a=0;a<t%n.length;a++)r=r.concat(n[a])}return r},animation:function(t,e,i){return h(t,e||400,i||function(){}).stop},ruler:_,SVG:V,Canvas:q,RawCanvas:G,getWebGLContext:function(t,e,i){if(void 0===e&&(e=1),!t)throw new Error("VISLite getWebGLContext:The mount point requires an HTMLElement type but encountered null.");var n,r=t.clientWidth,o=t.clientHeight,s=t;return s._vislite_canvas_?n=s._vislite_canvas_:(n=document.createElement("canvas"),t.appendChild(n),s._vislite_canvas_=n,t.setAttribute("vislite","WebGL")),n.style.width=r+"px",n.setAttribute("width",r+""),n.style.height=o+"px",n.setAttribute("height",o+""),function(t,e,i,n){void 0===i&&(i={}),void 0===n&&(n="scaleToFill");for(var r=["experimental-webgl","webkit-3d","moz-webgl"],o=t.getContext("webgl",i),s=0;s<r.length;s++){try{o=t.getContext(r[s],i)}catch(t){}if(o)break}if(!o)throw new Error("Non canvas or browser does not support webgl.");var a=o.canvas.width,h=o.canvas.height,_=e,u=e;"aspectFit"==n?a>h?_*=h/a:h>a&&(u*=a/h):"aspectFill"==n&&(a>h?u*=a/h:h>a&&(_*=h/a));var l=a*_,c=h*u;return o.viewport(.5*(a-l),.5*(h-c),l,c),o.depthFunc(o.LEQUAL),o.enable(o.DEPTH_TEST),o}(n,e,{},i)},Shader:W,Texture:Y,Buffer:J,Eoap:Q,Mercator:K,throttle:
/*!
    * throttle of OIPage v1.7.0-alpha.3
    * git+https://github.com/oi-contrib/OIPage.git
    */
function(t,e){var i={time:200,keep:!1,opportunity:"end"};if(e)for(var n in e)i[n]=e[n];var r,o=!1,s=!1,a=!1;return function(){const e=this;if(r=arguments,o)s=!0,a=!0;else{"end"!=i.opportunity&&t.apply(e,r),o=!0;var n=setInterval((()=>{s?i.keep||t.apply(e,r):("begin"!=i.opportunity&&(a||"end"==i.opportunity)&&t.apply(e,r),o=!1,a=!1,clearInterval(n)),s=!1}),i.time)}}},assemble:H,MapCoordinate:it,TreeLayout:rt,PieLayout:ot,BarLayout:st,initOption:k,mergeOption:O};return at},t.exports=e()},314:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i="",n=void 0!==e[5];return e[4]&&(i+="@supports (".concat(e[4],") {")),e[2]&&(i+="@media ".concat(e[2]," {")),n&&(i+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),i+=t(e),n&&(i+="}"),e[2]&&(i+="}"),e[4]&&(i+="}"),i})).join("")},e.i=function(t,i,n,r,o){"string"==typeof t&&(t=[[null,t,void 0]]);var s={};if(n)for(var a=0;a<this.length;a++){var h=this[a][0];null!=h&&(s[h]=!0)}for(var _=0;_<t.length;_++){var u=[].concat(t[_]);n&&s[u[0]]||(void 0!==o&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=o),i&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=i):u[2]=i),r&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=r):u[4]="".concat(r)),e.push(u))}},e}},601:t=>{"use strict";t.exports=function(t){return t[1]}},654:(t,e,i)=>{"use strict";i.d(e,{A:()=>a});var n=i(601),r=i.n(n),o=i(314),s=i.n(o)()(r());s.push([t.id,"body{margin:0;overflow:hidden}.drawing-app{height:100vh;display:flex;flex-direction:column}.toolbar{display:flex;gap:12px;align-items:center;padding:8px 12px;background:#fafafa;border-bottom:1px solid #eee}.toolbar input[type=range]{width:120px}#canvas-wrap{flex-grow:1}",""]);const a=s},872:function(t,e){
/*!
 * Zipaper v0.2.1
 * git+https://github.com/oi-contrib/Zipaper.git
 */
!function(t){"use strict";function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=Array(e);i<e;i++)n[i]=t[i];return n}function i(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=o(t))||e){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,h=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return a=t.done,t},e:function(t){h=!0,s=t},f:function(){try{a||null==i.return||i.return()}finally{if(h)throw s}}}}function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var n,r,o,s,a=[],h=!0,_=!1;try{if(o=(i=i.call(t)).next,0===e);else for(;!(h=(n=o.call(i)).done)&&(a.push(n.value),a.length!==e);h=!0);}catch(t){_=!0,r=t}finally{try{if(!h&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(_)throw r}}return a}}(t,e)||o(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,i){if(t){if("string"==typeof t)return e(t,i);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(t,i):void 0
/*!
  * mergeOption of VISLite JavaScript Library v1.3.0
  * git+https://github.com/oi-contrib/VISLite.git
  */}}var s=Object.prototype.toString;function a(t){if(null===t||"object"!=typeof t||"[object Object]"!=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":s.call(t)}(t))return!1;if(null===Object.getPrototypeOf(t))return!0;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function h(t,e){!function t(e,i){for(var n in i){var r=i[n];a(r)?(e[n]||(e[n]={}),t(e[n],i[n])):e[n]=r}}(t,e)}
/*!
  * throttle of OIPage v1.2.1
  * git+https://github.com/oi-contrib/OIPage.git
  */function _(t){if(/^[_$]/.test(t))throw new Error("The beginning of _ or $ is not allowed"+t)}var u=new RegExp("[\\x20\\t\\r\\n\\f]"),l=/^[a-zA-Z_$][0-9a-zA-Z_$]{0,}$/,c=["+","-","*","/","%","&","|","!","?",":","[","]","(",")",">","<","="],p=["+","-","*","/","%","&","|","!","?",":",">","<","=","<=",">=","==","===","!=","!=="];function f(t,e,i){e=e.trim();var n=-1,r=null,o=function(){return r=n++<e.length-1?e[n]:null},s=function(t){return e.substring(n,t+n>e.length?e.length:t+n)};o();for(var a=[];!(n>=e.length);)if(c.indexOf(r)>-1)if(["&","|","="].indexOf(r)>-1)if(["==="].indexOf(s(3))>-1)a.push(s(3)),n+=2,o();else{if(!(["&&","||","=="].indexOf(s(2))>-1))throw new Error("Illegal expression : "+e+"\nstep='analyseExpress',index="+n);a.push(s(2)),n+=1,o()}else["!=="].indexOf(s(3))>-1?(a.push(s(3)),n+=2,o()):[">=","<=","!="].indexOf(s(2))>-1?(a.push(s(2)),n+=1,o()):(a.push(r),o());else if(['"',"'"].indexOf(r)>-1){var h="",_=r;for(o();r!=_;){if(n>=e.length)throw new Error("String unclosed error : "+e+"\nstep='analyseExpress',index="+n);h+=r,o()}a.push(h+"@string"),o()}else if(/\d/.test(r)){var f="no";for(h=r,o();n<e.length;){if(/\d/.test(r))h+=r,"error"==f&&(f="yes");else{if("."!=r||"no"!=f)break;h+=r,f="error"}o()}"error"==f&&(h+="0"),a.push(+h)}else if(["null","true"].indexOf(s(4))>-1)a.push({null:null,true:!0}[s(4)]),n+=3,o();else if(["false"].indexOf(s(5))>-1)a.push({false:!1}[s(5)]),n+=4,o();else if(["undefined"].indexOf(s(9))>-1)a.push({undefined:void 0}[s(9)]),n+=8,o();else if(u.test(r))do{o()}while(u.test(r)&&n<e.length);else{var d=!1;if("."==r&&(d=!0,o()),!l.test(r))throw new Error("Illegal express : "+e+"\nstep='analyseExpress',index="+n);for(var v=1;n+v<=e.length&&l.test(s(v));)v+=1;if(d)a.push("["),a.push(s(v-1)+"@string"),a.push("]");else{var g=s(v-1),y=g in i?i[g]:t[g];a.push("string"==typeof y?y+"@string":y)}n+=v-2,o()}for(var m=0,w=0;w<a.length;w++)["+","-"].indexOf(a[w])>-1&&(0==w||p.indexOf(a[m-1])>-1)?(a[m++]=+(a[w]+a[w+1]),w+=1):a[m++]=a[w];return a.length=m,a}var d=function(t){return"string"==typeof t?t.replace(/@string$/,""):t};function v(t){for(var e,i=0,n=0;n<t.length;n++)"!"==t[n]?t[i]=!t[++n]:t[i]=t[n],i+=1;if(1==i)return d(t[0]);for(t.length=i,i=0,n=0;n<t.length;n++)"*"==t[n]?t[i-1]=d(t[i-1])*d(t[++n]):"/"==t[n]?t[i-1]=d(t[i-1])/d(t[++n]):"%"==t[n]?t[i-1]=d(t[i-1])%d(t[++n]):t[i++]=t[n];if(1==i)return d(t[0]);for(t.length=i,i=0,n=0;n<t.length;n++)"+"==t[n]?t[i-1]="string"==typeof(e=d(t[i-1])+d(t[++n]))?e+"@string":e:"-"==t[n]?t[i-1]=d(t[i-1])-d(t[++n]):t[i++]=t[n];if(1==i)return d(t[0]);for(t.length=i,i=0,n=0;n<t.length;n++)">"==t[n]?t[i-1]=d(t[i-1])>d(t[++n]):"<"==t[n]?t[i-1]=d(t[i-1])<d(t[++n]):"<="==t[n]?t[i-1]=d(t[i-1])<=d(t[++n]):">="==t[n]?t[i-1]=d(t[i-1])>=d(t[++n]):t[i++]=t[n];if(1==i)return d(t[0]);for(t.length=i,i=0,n=0;n<t.length;n++)"=="==t[n]?t[i-1]=d(t[i-1])==d(t[++n]):"==="==t[n]?t[i-1]=d(t[i-1])===d(t[++n]):"!="==t[n]?t[i-1]=d(t[i-1])!=d(t[++n]):"!=="==t[n]?t[i-1]=d(t[i-1])!==d(t[++n]):t[i++]=t[n];if(1==i)return d(t[0]);for(t.length=i,i=0,n=0;n<t.length;n++)"&&"==t[n]?(t[i-1]=d(t[i-1])&&d(t[1+n]),n+=1):"||"==t[n]?(t[i-1]=d(t[i-1])||d(t[1+n]),n+=1):t[i++]=t[n];if(1==i)return d(t[0]);for(t.length=i,i=0,n=0;n<t.length;n++)"?"==t[n]?(t[i-1]=d(t[i-1])?d(t[n+1]):d(t[n+3]),n+=3):t[i++]=t[n];if(1==i)return d(t[0]);throw t.length=i,new Error("Unrecognized expression : ["+t.toString()+"]")}var g=function(t,e,i){if(e.indexOf("(")>-1){for(var n=[],r=[],o=0,s=0;s<e.length;s++)if("("==e[s])o>0&&r.push("("),o+=1;else if(")"==e[s]){if(o>1&&r.push(")"),0==(o-=1)){var a=v(g(t,r));n.push("string"==typeof a?a+"@string":a),r=[]}}else o>0?r.push(e[s]):n.push(e[s]);e=n}return y(e)},y=function(t){for(var e=!0;e;){e=!1;for(var i=[],n=[],r=!1,o=0;o<t.length;o++)if("["==t[o]&&0!=o&&"]"!=t[o-1]){if(r){i.push("[");for(var s=0;s<n.length;s++)i.push(n[s])}else r=!0;n=[]}else if("]"==t[o]&&r){e=!0;var a=v(n),h=i[i.length-1];"string"==typeof h&&(h=h.replace(/@string$/,""));var _=h[a];i[i.length-1]="string"==typeof _?_+"@string":_,r=!1}else r?n.push(t[o]):i.push(t[o]);t=i}return t},m=function(t){for(var e=[],i=[],n=0;n<t.length;n++)"["==t[n]?i=[]:"]"==t[n]?e.push(v(i)):i.push(t[n]);return e};function w(t,e,i){var n,r=g(t,e);if("["!=r[0])n=[v(r)];else if("]"==r[r.length-1])n=m(r);else{var o=r.lastIndexOf("]"),s=m(r.slice(0,o+1)),a=r.slice(o+1);a.unshift(function(t,e,i){for(var n=(e[0]in i?i[e[0]]:t[e[0]]),r=1;r<e.length;r++)try{n=n[e[r]]}catch(n){throw console.error({target:t,scope:i,expressArray:e,index:r}),n}return n}(t,s,i)),n=[v(a)]}return n}var x=function(t,e,i){arguments.length<3&&(i={});var n=f(t,e,i),r=w(t,n,i);if(r.length>1)throw new Error("Illegal expression : "+e+"\nstep='evalExpress',path="+r+",expressArray="+n);return r[0]};function b(t){var e=r(t);return null!=t&&("object"===e||"function"===e)}function E(t){return{value:t,type:"ref"}}function P(t,e,i,n){t[e]=new Proxy(i,{get:function(t,e){return t[e]},set:function(t,e,i){var r=Reflect.set(t,e,i);return n(),r}})}function T(t,e,i,n){var r=i,o={get:function(){return r},set:function(t){r=t,n()}};t[e]=r,Object.defineProperty(t,e,o)}function C(t,e,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},u=(new Date).valueOf()+""+(1e3*Math.random()).toFixed(0);T(e,"__uniqueId__",u,(function(){r.lifecycle.beforeDestroy&&r.lifecycle.beforeDestroy.call(p);for(var e=0;e<t.__children.length;e++)if(t.__children[e].__uniqueId===u){t.__children.splice(e,1);break}})),e.innerHTML="";var l={};for(var c in r.props)if(c in o){if(!r.props[c].isValid(o[c]))throw new Error("Prop check failed:"+c+" = "+o[c]);l[c]=o[c]}else if(void 0!==r.props[c].default)l[c]=r.props[c].default;else if(r.props[c].required)throw new Error("Prop is Required:"+c);var p=new R({__parent:t,__uniqueId:u,__el:e,_props:l,_router:{meta:a},$emit:function(t,e){if(!(r.emits.indexOf(t)>-1))throw new Error("Illegal event type, as it is not pre-defined in advance:"+t);s[t]&&s[t](e)}});for(var f in r.methods)_(f),p[f]=r.methods[f];var d=[],v=[],g=function(t,e){var i={time:200,keep:!1,opportunity:"end"};if(e)for(var n in e)i[n]=e[n];var r,o=!1,s=!1,a=!1;return function(){const e=this;if(r=arguments,o)s=!0,a=!0;else{"end"!=i.opportunity&&t.apply(e,r),o=!0;var n=setInterval((()=>{s?i.keep||t.apply(e,r):("begin"!=i.opportunity&&(a||"end"==i.opportunity)&&t.apply(e,r),o=!1,a=!1,clearInterval(n)),s=!1}),i.time)}}}((function(){for(var t=0,e=d;t<e.length;t++){var i=e[t],n=i.directive;n.lifecycle.update&&n.lifecycle.update.call(p,i.el,{type:i.type,target:p,value:"string"==typeof i.exp&&i.exp?x(p.__rootInstance,i.exp,p):i.exp,exp:i.exp})}for(var r=0,o=v;r<o.length;r++){var s=o[r],a=s.instance,h=s.props;for(var _ in h){var u=x(p.__rootInstance,h[_],p);a._props[_]!==u&&(a._props[_]=u)}}}),{keep:!0,time:50}),y=r.data.call(p);for(var m in y)_(m),b(y[m])&&"value"in y[m]&&"type"in y[m]?"ref"===y[m].type?T(p,m,y[m].value,g):"reactive"===y[m].type&&P(p,m,y[m].value,g):p[m]=y[m];if(t.__children.push(p),!r.attr.hadMounted&&(r.attr.hadMounted=!0,r.style)){var w=document.createElement("style");w.textContent=r.style,document.getElementsByTagName("head")[0].appendChild(w)}if(r.render){var E,A=r.render((function(t,e,r){var o=document.createElement(t),s={},a={},_={};for(var u in e.attr)o.setAttribute(u,e.attr[u]),s[u]=e.attr[u];var l=p.__components[t];if(l)setTimeout((function(){var t=C(p,o,l,s,a,{},{default:r});v.push({instance:t,props:_})}));else if("router"===t)p.__router={el:o,router:null,instance:null};else{var c,f=i(r);try{for(f.s();!(c=f.n()).done;){var g=c.value;if("SLOT"===g.nodeName&&h.default){var y,m=i(h.default);try{for(m.s();!(y=m.n()).done;){var w=y.value;g.appendChild(w)}}catch(t){m.e(t)}finally{m.f()}}o.appendChild(g)}}catch(t){f.e(t)}finally{f.f()}}var b,E=i(e.direcitve);try{var P=function(){var t=b.value,i=n(t.key.replace(/^z-/,"").split(":"),2),r=i[0],h=i[1],u=void 0===h?"":h;if(l&&"model"===r)e.direcitve.push({key:"z-bind:value",value:t.value}),e.direcitve.push({key:"z-on:input",value:function(e,i){this[t.value]=e.data}});else{var c=p.__directives[r];if(!c)throw new Error("The direcitve does not exist: "+r);var f=t.value,v="string"==typeof f&&f?x(p.__rootInstance,f,p):f;if(c.lifecycle.created&&c.lifecycle.created.call(p,o,{type:u,target:p,value:v,exp:f}),l)if("bind"===r)s[u]=v,u&&f&&(_[u]=f);else if("on"===r){var g=u.split(".")[0];a[g]=function(t){var e=new Event(g);e.data=t,o.dispatchEvent(e)}}d.push({el:o,directive:c,type:u,exp:f})}};for(E.s();!(b=E.n()).done;)P()}catch(t){E.e(t)}finally{E.f()}return o})),S=i(A);try{for(S.s();!(E=S.n()).done;){var I=E.value;e.appendChild(I)}}catch(t){S.e(t)}finally{S.f()}}return r.lifecycle.created&&r.lifecycle.created.call(p),p}function A(){var t,e,i=window.location.href.split("?"),n=(i[0]+"#").split("#")[1],r=i[1]||"";return""==r?t={}:(e=r.split("&"),t={},e.forEach((function(e){var i=e.split("=");t[i[0]]=i[1]}))),{router:n||"/",params:t}}function R(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var e in h(this,{__parent:null,__children:[],__router:null}),t)t.hasOwnProperty(e)&&(this[e]=t[e])}function S(t){return{lifecycle:{created:t.created,update:t.update}}}h(R.prototype,{$$router:null,__components:{},__directives:{},__rootInstance:null,__router_old:"",$goto:function(t){if(this.$$router){var e=!1;if(t||(e=!0,t=A().router),R.prototype.__router_old!==t){R.prototype.__router_old=t;var n=this.$$router(t.match(/\/[^/]*/g)),r=function(t,e){var o=function t(e){if(e.__router)return e;var n,r=i(e.__children);try{for(r.s();!(n=r.n()).done;){var o=t(n.value);if(o)return o}}catch(t){r.e(t)}finally{r.f()}}(e);n[t]?o&&n[t].page().then((function(e){n[t].router!=o.__router.router&&(o.__router.instance=C(o,o.__router.el,e.default,{},{},n[t].meta),o.__router.router=n[t].router),r(t+1,o.__router.instance)})):o&&(o.__router.router="",o.__router.el.innerHTML="")};r(0,this.__rootInstance),e||(window.location.href="#"+t)}}}});var I=S({created:function(t,e){for(var i=e.type.split("."),n={prevent:!1,stop:!1,once:!1,enter:!1},r=1;r<i.length;r++)n[i[r]]=!0;var o=function(r){n.enter&&13!=(r.keyCode||r.which)||(n.stop&&r.stopPropagation(),n.prevent&&r.preventDefault(),e.value.apply(e.target,[r,t]),n.once&&t.removeEventListener(i[0],o,!1))};t.addEventListener(i[0],o,!1)}});function M(t,e){"radio"==t.getAttribute("type")?e==t.value?t.setAttribute("checked","checked"):t.removeAttribute("checked"):t.value===e&&t.textContent===e||(t.value=t.textContent=e)}var k=function(t,e){"string"==typeof e.type&&e.type.length>0?t.getAttribute(e.type)!=e.value&&t.setAttribute(e.type,e.value):M(t,e.value)},O=S({created:k,update:k}),L=S({created:function(t,e){M(t,e.value),t.addEventListener("input",(function(){!function(t,e,i,n){arguments.length<4&&(n={});for(var r=w(t,f(t,e,n),n),o=t,s=0;s<r.length-1;s++)r[s]in o||(o[r[s]]=Array.isArray(o)?[]:{}),o=o[r[s]];o[r[r.length-1]]=i}(e.target,"."+e.exp,t.value)}),!1)},update:function(t,e){M(t,e.value)}}),V=S({created:function(t,e){t.style.display=e.value?"":"none"},update:function(t,e){t.style.display=e.value?"":"none"}});t.createApp=function(t){R.prototype.__rootInstance||(R.prototype.__rootInstance=new R);var e={mount:function(i){return C(R.prototype.__rootInstance,i,t),R.prototype.__rootInstance.$goto(),e},use:function(t,i){return t.install&&t.install(R,i),e},component:function(t,i){return R.prototype.__components[t]=i,e},directive:function(t,i){return R.prototype.__directives[t]=i,e}};return e.directive("on",I).directive("bind",O).directive("model",L).directive("show",V),e},t.defineDirective=S,t.defineElement=function(t){var e,i=t.template?function(e){return function t(i){for(var n=[],r=0;r<i.length;r++){var o=i[r];if("string"==typeof i[r]){var s=document.createTextNode("");s.textContent=o.trim(),n.push(s)}else{var a={},h=[];for(var _ in o.attr)/^z-/.test(_)?h.push({key:_,value:o.attr[_]}):a[_]=o.attr[_];n.push(e(o.name,{attr:a,direcitve:h},t(o.children)))}}return n}(t.template)}:null,n={};if(t.props){var r=function(e){var i;t.props.hasOwnProperty(e)&&(n[e]={isValid:function(i){return!t.props[e].type||i.constructor===t.props[e].type},default:null!==(i=t.props[e].default)&&void 0!==i?i:void 0,required:t.props[e].required||!1})};for(var o in t.props)r(o)}return{attr:{hadMounted:!1},methods:t.methods||{},emits:t.emits||[],props:n,data:t.data||function(){return{}},render:i,style:(null===(e=t.style)||void 0===e?void 0:e.content)||"",lifecycle:{created:t.created,beforeDestroy:t.beforeDestroy}}},t.defineRouter=function(t){return{install:function(e){var n=function t(e){var n,r={},o=i(e);try{var s=function(){var e=n.value;e.component?r[e.path]={path:e.path,meta:e.meta||{},valueOf:e.component,children:e.children?t(e.children):{}}:r[e.path]=function(){return r[e.redirect]}};for(o.s();!(n=o.n()).done;)s()}catch(t){o.e(t)}finally{o.f()}return r}(t.routers);e.prototype.$$router=function(t){var e,r=[],o=n,s=function(t){for(;"function"==typeof t;)t=t();t&&(r.push({router:t.path,meta:t.meta,page:t.valueOf}),o=t.children)},a=i(t);try{for(a.s();!(e=a.n()).done;){var h=e.value;if(!o)break;s(o[h])}}catch(t){a.e(t)}finally{a.f()}for(;o&&o["/"];)s(o["/"]);return r},window.addEventListener("popstate",(function(){e.prototype.$goto(A().router)}))}}},t.reactive=function(t){return b(t)?{value:t,type:"reactive"}:E(t)},t.ref=E,t.watcher=function(t,e,i){T(t,e,t[e],i)}}(e)}},e={};function i(n){var r=e[n];if(void 0!==r)return r.exports;var o=e[n]={id:n,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";var t=i(872);var e=i(654),n=i(151);let r;const o=(0,t.defineElement)({template:[{name:"div",attr:{class:"drawing-app"},children:[{name:"div",attr:{class:"toolbar"},children:[{name:"label",attr:{},children:[" ",{name:"input",attr:{type:"color",id:"color","z-on:change":"colorInput",value:"#000000"},children:[]}]},{name:"label",attr:{},children:[" ",{name:"input",attr:{type:"range",id:"size",min:"1",max:"50","z-on:change":"sizeInput",value:"4"},children:[]}]},{name:"button",attr:{id:"clear","z-on:click":"clear"},children:[""]},{name:"button",attr:{id:"save","z-on:click":"download"},children:[""]}]},{name:"div",attr:{id:"canvas-wrap"},children:[]}]}],data:()=>({}),methods:{clear(){r.clear()},download(){r.toDataURL().then((t=>{const e=document.createElement("a");e.href=t,e.download="drawing.png",e.click()}))},colorInput(t){r.config({strokeStyle:t.target.value})},sizeInput(t){r.config({lineWidth:t.target.value})}},created(){window.onresize=(0,n.throttle)((()=>{let t=r.getInfo();r.toDataURL().then((e=>{r=new n.Canvas(document.getElementById("canvas-wrap"),{});const i=document.getElementById("color"),o=document.getElementById("size");r.config({strokeStyle:i.value,lineWidth:o.value}),r.drawImage(e,0,0,t.width,t.height)}))})),r=new n.Canvas(document.getElementById("canvas-wrap"));const t=document.getElementById("color"),e=document.getElementById("size");r.config({strokeStyle:t.value,lineWidth:e.value});let i=!1;r.bind("mousedown",((t,e,n)=>{i=!0,r.beginPath()})),r.bind("mouseup",((t,e,n)=>{i=!1,r.closePath()})),r.bind("mousemove",((t,e,n)=>{i&&(r.lineTo(e,n),r.stroke())}))},style:{content:e.A}});(0,t.createApp)(o).mount(document.getElementById("root"))})()})();